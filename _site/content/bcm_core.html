<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>IMPORTANT NOTE | Bitcoin Cache Machine</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="IMPORTANT NOTE" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Privacy-preserving Bitcoin Payment infrastructure for home and office." />
<meta property="og:description" content="Privacy-preserving Bitcoin Payment infrastructure for home and office." />
<link rel="canonical" href="http://localhost:4000/content/bcm_core.html" />
<meta property="og:url" content="http://localhost:4000/content/bcm_core.html" />
<meta property="og:site_name" content="Bitcoin Cache Machine" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/content/bcm_core.html","headline":"IMPORTANT NOTE","description":"Privacy-preserving Bitcoin Payment infrastructure for home and office.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=92419ec9030e5a41186c8c2f74a9bbd9205958c9">
  </head>
  <body>
    <!-- <a id="skip-to-content" href="#content">Skip to the content.</a> -->

    <header class="page-header" role="banner">
      <h1 class="project-name">Bitcoin Cache Machine</h1>
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="important-note">IMPORTANT NOTE</h1>

<p>This section is still under construction.  Your attempts at running scripts here will likely fail at the moment. Once we get a stable product with a semi-complete feature set, we will merge changes into the master branch. Feel free to inspect the codebase to see what we’re working on!</p>

<h1 id="deploying-bitcoin-cache-machine-components-using-the-lxd-api">Deploying Bitcoin Cache Machine components using the LXD API</h1>

<p>This is where BCM data center components reside. The main entrypoint at this level is <code class="highlighter-rouge">./up_lxc_project.sh</code>. This script calls subscripts to provision the data center. BCM Environment variables, which are refreshed (i.e., exported) every time any script executes, guide the logic the installation and deployment process. All <code class="highlighter-rouge">up_lxc_*.sh</code> scripts are designed to be idempotent; running the scripts multiple times SHOULD NOT change the resulting data center deployment.</p>

<h2 id="assumptions">Assumptions</h2>

<p>The instructions in this directory make the following assumptions:</p>

<ol>
  <li>you have one or more LXD remote endpoints defined on the <code class="highlighter-rouge">dev machine</code>. You can run <code class="highlighter-rouge">lxc remote list</code>, or <code class="highlighter-rouge">lxc remote get-default</code> to view the current LXD endpoints you have defined on your <code class="highlighter-rouge">dev machine</code>. The endpoint could be local, in which case BCM will be deployed to the LXD daemon running on the <code class="highlighter-rouge">dev machine</code> (developer machine). It could be the result of ../up_multipass.sh, which creates a new multipass-based VM with a remote LXD daemon, or it could be a home server that you’ve <a href="../../docs/installation/lxd_host_prep.md">manually provisioned</a></li>
  <li>All scripts with <code class="highlighter-rouge">lxc</code> in the name ASSUMES that the commands are being executed against to THE CURRENT LXD remote endpoint. Issue the <code class="highlighter-rouge">lxc remote get-default</code> command to determine your active endpoint.</li>
  <li>BCM LXD scripts SHOULD be loaded PRIOR to executing any <code class="highlighter-rouge">lxd</code> scripts. <a href="../resources/README.md">These environment variables define BCM-specific deployment options</a>. The files in ../resources/ MUST be copied to the $BCM_RUNTIME_DIR/defaults/ directory unless you want to fork Bitcoin Cache Machine. When executed, <code class="highlighter-rouge">../../setup.sh</code> at the root of this repository creates the necessary files and directories (including $BCM_RUNTIME_DIR) to create BCM instances in idiomatic manner. All endpoint-specific information is kept in $BCM_RUNTIME_DIR on the <code class="highlighter-rouge">admin machine</code>. Thus, you should back it up and protect it accordingly. Future versions of BCM will integrate Trezor-T on-board storage for management of this sensitive information (including key and password management).</li>
</ol>

<p>Decide where you want to run your BCM workload. You can deploy BCM to the <code class="highlighter-rouge">dev machine</code> for quick and convenient testing. You can consider running BCM in a <a href="./multipass/">multipass-based VM</a> or in a <a href="./cloud_providers/">cloud provider via cloud-init</a>. <code class="highlighter-rouge">multipass</code> VMs use lower-level hardware-based virtualization which provide additional security guarantees. In the end, all you need to run BCM component is a LXD endpoint configured and controllable by your <code class="highlighter-rouge">dev machine</code>. Use the <code class="highlighter-rouge">lxc remote list</code>, <code class="highlighter-rouge">lxc remote get-default</code> and related commands.</p>

<h2 id="privilege-levels">Privilege Levels</h2>

<p>Unfortuantely, BCM is currently built entirely on privileged LXC containers. This is because Docker swarm could not be made functional using unprivileged containers. There are several mitigating factors that reduce the overall risk involved with this limitation:</p>

<ul>
  <li><code class="highlighter-rouge">dockerd</code> runs within each privileged LXC container, hus <code class="highlighter-rouge">dockerd</code>-level process isolation is in effect for running application-level containers.</li>
  <li>The network-level attack surface of BCM is extremely small. By default BCM exposes ZERO services to the local network interfaces EXCEPT for the LXD endpoint (for the management plane). Any service exposed to the internet is exposed as an authenticated onion whenever possible. This provides cloud-like connectivity to your BCM instance in your home or office. You get end-to-end encryption and IP anonymity as well as Layer 4 authentication.</li>
</ul>

<h3 id="priviligedyml">priviliged.yml</h3>

<h3 id="unprivilegedyml">unprivileged.yml</h3>



      <footer class="site-footer">
    
      <span class="site-footer-owner"><a href="http://localhost:4000">Bitcoin Cache Machine</a> is maintained by <a href="http://github.com/BitcoinCacheMachine">BitcoinCacheMachine</a>.</span>
    
</footer>
    </main>
  </body>
</html>